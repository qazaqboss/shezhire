<!DOCTYPE html>
<html lang="kk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHEJIRE AI ‚Äî –¶–∏—Ñ—Ä–æ–≤–æ–µ –ù–∞—Å–ª–µ–¥–∏–µ –ö–æ—á–µ–≤–Ω–∏–∫–æ–≤</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --bg-void: #080808;
            --bg-surface: #0D0D0D;
            --gold-primary: #C5A55A;
            --gold-deep: #8B6914;
            --gold-glow: rgba(197, 165, 90, 0.15);
            --node-w: 180px;
            --node-w-deep: 140px;
        }

        @media (max-width: 768px) {
            :root {
                --node-w: 140px;
                --node-w-deep: 110px;
            }
        }

        body {
            background-color: var(--bg-void);
            color: white;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }

        .font-serif {
            font-family: 'Playfair Display', serif;
        }

        .gold-pill {
            background: linear-gradient(135deg, var(--gold-primary) 0%, var(--gold-deep) 100%);
            color: black;
        }

        .glass-card {
            background: var(--bg-surface);
            border: 1px solid #1a1a1a;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .glass-card:hover {
            border-color: rgba(197, 165, 90, 0.4);
            box-shadow: 0 0 30px var(--gold-glow);
            transform: translateY(-4px);
        }

        .tamga-glow {
            text-shadow: 0 0 15px rgba(197, 165, 90, 0.6);
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0) translateX(0);
                opacity: 0.3;
            }

            50% {
                transform: translateY(-40px) translateX(20px);
                opacity: 0.8;
            }
        }

        .animate-float {
            animation: float 10s ease-in-out infinite;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #080808;
        }

        ::-webkit-scrollbar-thumb {
            background: #222;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gold-primary);
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        const ZHUZES = {
            ULY: "“∞–ª—ã –∂“Ø–∑",
            ORTA: "–û—Ä—Ç–∞ –∂“Ø–∑",
            KISHI: "–ö—ñ—à—ñ –∂“Ø–∑",
            AKSUYEK: "–ê“õ—Å“Ø–π–µ–∫"
        };

        const TRIBES_DB = {
            // “∞–ª—ã –∂“Ø–∑
            qanly: { name: "“ö–ê“¢–õ–´", juz: ZHUZES.ULY, tamga: "‚©ö", tamgaName: "–ö”©—Å–µ—É", color: "#C5A55A", story: "“ö–∞“£–ª—ã ‚Äî –¥—Ä–µ–≤–Ω–µ–µ –ø–ª–µ–º—è, —É–ø–æ–º–∏–Ω–∞–µ–º–æ–µ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö –∑–∞–¥–æ–ª–≥–æ –¥–æ –Ω–∞—à–µ–π —ç—Ä—ã. –û–Ω–∏ –±—ã–ª–∏ –º–æ—â–Ω–æ–π —Å–∏–ª–æ–π –≤ –°—ã—Ä–¥–∞—Ä—å–∏–Ω—Å–∫–æ–º —Ä–µ–≥–∏–æ–Ω–µ. –ü–æ –¢–µ–º–∏—Ä–≥–∞–ª–∏–µ–≤—É, –ö–∞–Ω–≥–ª—ã —è–≤–ª—è—é—Ç—Å—è –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞–º–∏ –º–æ–≥—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –¥–µ—Ä–∂–∞–≤—ã –ö–∞–Ω–≥—é–π.", era: "III –≤. –¥–æ –Ω.—ç. ‚Äî XVIII –≤." },
            shanyshqyly: { name: "–®–ê–ù–´–®“ö–´–õ–´", juz: ZHUZES.ULY, tamga: "‚ãî", tamgaName: "–®–∞–Ω—ã—à“õ—ã", color: "#C5A55A", story: "–®–∞–Ω—ã—à“õ—ã–ª—ã ‚Äî –≤–æ–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–ª–µ–º—è –°—Ç–∞—Ä—à–µ–≥–æ –∂—É–∑–∞. –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ —Å–≤—è–∑–∞–Ω—ã —Å –ö–∞–Ω–¥–∂—ã–≥–∞–ª—ã. –°—ã–≥—Ä–∞–ª–∏ –≤–∞–∂–Ω—É—é —Ä–æ–ª—å –≤ –∑–∞—â–∏—Ç–µ —é–∂–Ω—ã—Ö —Ä—É–±–µ–∂–µ–π –ö–∞–∑–∞—Ö—Å–∫–æ–≥–æ —Ö–∞–Ω—Å—Ç–≤–∞." },
            sirgeli: { name: "–°–Ü–†–ì–ï–õ–Ü", juz: ZHUZES.ULY, tamga: "‚äì", tamgaName: "–°—ñ—Ä–≥–µ", color: "#C5A55A", story: "–°–∏—Ä–≥–µ–ª–∏ –ø–æ–ª—É—á–∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ç –∑–Ω–∞–∫–∞ '—Å–∏—Ä–≥–µ' ‚Äî –ø—É—Ç—ã –¥–ª—è –∂–µ—Ä–µ–±—è—Ç. –≠—Ç–æ –ø–ª–µ–º—è —Å–ª–∞–≤–∏–ª–æ—Å—å —Å–≤–æ–∏–º–∏ —Ç–∞–±—É–Ω–∞–º–∏ –∏ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ–º –≤ –∫–æ–Ω–µ–≤–æ–¥—Å—Ç–≤–µ." },
            shaqsham: { name: "–®–ê“ö–®–ê–ú", juz: ZHUZES.ULY, tamga: "·óï", tamgaName: "–¢–∞–º“ì–∞", color: "#C5A55A", story: "–ú–∞–ª–æ—á–∏—Å–ª–µ–Ω–Ω–æ–µ, –Ω–æ –≥–æ—Ä–¥–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤ —Å–æ—Å—Ç–∞–≤–µ –°—Ç–∞—Ä—à–µ–≥–æ –∂—É–∑–∞, —Å–æ—Ö—Ä–∞–Ω–∏–≤—à–µ–µ —Å–≤–æ—é –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –≤–µ–∫–∞." },
            saryuysin: { name: "–°–ê–†–´“Æ–ô–°–Ü–ù", juz: ZHUZES.ULY, tamga: "‚ö≠", tamgaName: "–ê–±–∞“õ", color: "#C5A55A", story: "–ü—Ä—è–º—ã–µ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∏ –¥—Ä–µ–≤–Ω–∏—Ö –£—Å—É–Ω–µ–π, –≥–æ—Å–ø–æ–¥—Å—Ç–≤–æ–≤–∞–≤—à–∏—Ö –≤ –°–µ–º–∏—Ä–µ—á—å–µ –≤ –∞–Ω—Ç–∏—á–Ω—É—é —ç–ø–æ—Ö—É. '–°–∞—Ä—ã' —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –¥—Ä–µ–≤–Ω–æ—Å—Ç—å –∏–ª–∏ –±–ª–∞–≥–æ—Ä–æ–¥—Å—Ç–≤–æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è." },
            shapyrashty: { name: "–®–ê–ü–´–†–ê–®–¢–´", juz: ZHUZES.ULY, tamga: "‚àÄ", tamgaName: "–ê–π—ã—Ä", color: "#C5A55A", story: "–®–∞–ø—ã—Ä–∞—à—Ç—ã ‚Äî —Å—Ç—Ä–∞–∂–∏ –ñ–µ—Ç—ã—Å—É. –ò–∑ —ç—Ç–æ–≥–æ —Ä–æ–¥–∞ –≤—ã—à–ª–∏ –º–Ω–æ–≥–∏–µ –±–∞—Ç—ã—Ä—ã, –∑–∞—â–∏—â–∞–≤—à–∏–µ –ê–ª–º–∞—Ç–∏–Ω—Å–∫–∏–π —Ä–µ–≥–∏–æ–Ω –æ—Ç –Ω–∞–±–µ–≥–æ–≤ –¥–∂—É–Ω–≥–∞—Ä." },
            jalayir: { name: "–ñ–ê–õ–ê–ô–´–†", juz: ZHUZES.ULY, tamga: "‚´ô", tamgaName: "–¢–∞—Ä–∞“õ", color: "#C5A55A", story: "–ñ–∞–ª–∞–π—ã—Ä—ã ‚Äî –æ–¥–Ω–æ –∏–∑ —Å–∞–º—ã—Ö –≤–ª–∏—è—Ç–µ–ª—å–Ω—ã—Ö –ø–ª–µ–º–µ–Ω –≤ –∏–º–ø–µ—Ä–∏–∏ –ß–∏–Ω–≥–∏—Å—Ö–∞–Ω–∞. –ú—É–∫–∞–ª–∏-–≥–æ–æ-–≤–∞–Ω, –ø—Ä–∞–≤–∞—è —Ä—É–∫–∞ –ß–∏–Ω–≥–∏—Å—Ö–∞–Ω–∞, –±—ã–ª –∂–∞–ª–∞–π—ã—Ä–æ–º. –í –ö–∞–∑–∞—Ö—Å–∫–æ–º —Ö–∞–Ω—Å—Ç–≤–µ —Å—á–∏—Ç–∞–ª–∏—Å—å '–Ω–æ“õ—Ç–∞ –∞“ì–∞—Å—ã' ‚Äî –ø–µ—Ä–≤–µ–Ω—Å—Ç–≤—É—é—â–∏–º–∏ –≤ –°—Ç–∞—Ä—à–µ–º –∂—É–∑–µ." },
            isty: { name: "–´–°–¢–´", juz: ZHUZES.ULY, tamga: "‚©î", tamgaName: "–ö”©—Å–µ—É", color: "#C5A55A", story: "–´—Å—Ç—ã ‚Äî —Ä–æ–¥, —Ç–µ—Å–Ω–æ —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –û—à–∞–∫—Ç—ã. –ü—Ä–æ–∂–∏–≤–∞—é—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –≤ –ñ–∞–º–±—ã–ª—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏." },
            oshaqty: { name: "–û–®–ê“ö–¢–´", juz: ZHUZES.ULY, tamga: "‚äº", tamgaName: "–û—à–∞“õ", color: "#C5A55A", story: "–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–æ–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—Ç '–æ—à–∞“õ' (–æ—á–∞–≥). –°–∏–º–≤–æ–ª –¥–æ–º–∞—à–Ω–µ–≥–æ —É—é—Ç–∞ –∏ –Ω–µ—Ä—É—à–∏–º–æ—Å—Ç–∏ —Å–µ–º–µ–π–Ω—ã—Ö —É–∑." },
            alban: { name: "–ê–õ–ë–ê–ù", juz: ZHUZES.ULY, tamga: "‚ßä", tamgaName: "–ê–π—ã—Ä", color: "#C5A55A", story: "–ê–ª–±–∞–Ω—ã ‚Äî –≥–æ—Ä–Ω—ã–µ –≤–æ–∏–Ω—ã, —Ö–æ–∑—è–µ–≤–∞ –ó–∞–∏–ª–∏–π—Å–∫–æ–≥–æ –ê–ª–∞—Ç–∞—É. –ò–∑–≤–µ—Å—Ç–Ω—ã —Å–≤–æ–∏–º –≤–æ—Å—Å—Ç–∞–Ω–∏–µ–º 1916 –≥–æ–¥–∞ –ø—Ä–æ—Ç–∏–≤ —Ü–∞—Ä—Å–∫–æ–π –≤–ª–∞—Å—Ç–∏." },
            suan: { name: "–°–£–ê–ù", juz: ZHUZES.ULY, tamga: "‚©ù", tamgaName: "–ê–π—ã—Ä", color: "#C5A55A", story: "–ë—Ä–∞—Ç—Å–∫–æ–µ –ø–ª–µ–º—è –ê–ª—å–±–∞–Ω–æ–≤ –∏ –î—É–ª–∞—Ç–æ–≤. –ö–æ—á–µ–≤–∞–ª–∏ –≤ –ø—Ä–µ–¥–≥–æ—Ä—å—è—Ö –î–∂—É–Ω–≥–∞—Ä—Å–∫–æ–≥–æ –ê–ª–∞—Ç–∞—É." },
            dulat: { name: "–î–£–õ–ê–¢", juz: ZHUZES.ULY, tamga: "‚óØ", tamgaName: "–î”©“£–≥–µ–ª–µ–∫", color: "#C5A55A", story: "–î—É–ª–∞—Ç—ã ‚Äî —Å–∞–º–æ–µ –º–Ω–æ–≥–æ—á–∏—Å–ª–µ–Ω–Ω–æ–µ –ø–ª–µ–º—è –°—Ç–∞—Ä—à–µ–≥–æ –∂—É–∑–∞. –°–æ—Å—Ç–æ—è–ª–∏ –∏–∑ —á–µ—Ç—ã—Ä–µ—Ö –∫—Ä—É–ø–Ω—ã—Ö —Ä–æ–¥–æ–≤: –ë–æ—Ç–ø–∞–π, –®—ã–º—ã—Ä, –°–∏–∫—ã–º, –ñ–∞–Ω—ã—Å. –§–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞–ª–∏ –°–µ–º–∏—Ä–µ—á—å–µ –≤–µ–∫–∞–º–∏." },

            // –û—Ä—Ç–∞ –∂“Ø–∑
            argyn: { name: "–ê–†“í–´–ù", juz: ZHUZES.ORTA, tamga: "‚ñ≥", tamgaName: "“Æ—à–∫—ñ–ª", color: "#C5A55A", story: "–ê—Ä–≥—ã–Ω—ã ‚Äî –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–∞—Ä–∫–∞—Å –û—Ä—Ç–∞ –∂—É–∑–∞. –ü–ª–µ–º—è –±–∏–µ–≤, –ø–æ—ç—Ç–æ–≤ –∏ –¥–∏–ø–ª–æ–º–∞—Ç–æ–≤. –°–∞–º—ã–π –º–Ω–æ–≥–æ—á–∏—Å–ª–µ–Ω–Ω—ã–π —Ä–æ–¥ –∫–∞–∑–∞—Ö–æ–≤ —Å–µ–≥–æ–¥–Ω—è." },
            nayman: { name: "–ù–ê–ô–ú–ê–ù", juz: ZHUZES.ORTA, tamga: "‚©î", tamgaName: "–ë–∞“õ–∞–Ω", color: "#C5A55A", story: "–ù–∞–π–º–∞–Ω—ã ‚Äî –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∏ –≤–µ–ª–∏–∫–æ–≥–æ –ù–∞–π–º–∞–Ω—Å–∫–æ–≥–æ —Ö–∞–Ω—Å—Ç–≤–∞. –û–±–ª–∞–¥–∞–ª–∏ —Ä–∞–∑–≤–∏—Ç–æ–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é –∏ –ø–∏—Å—å–º–µ–Ω–Ω–æ—Å—Ç—å—é –∑–∞–¥–æ–ª–≥–æ –¥–æ –≤–æ–∑–≤—ã—à–µ–Ω–∏—è –º–æ–Ω–≥–æ–ª–æ–≤." },
            qonyrat: { name: "“ö–û“¢–´–†–ê–¢", juz: ZHUZES.ORTA, tamga: "‚ßñ", tamgaName: "–ë–æ—Å–∞“ì–∞", color: "#C5A55A", story: "–ö–æ–Ω—ã—Ä–∞—Ç—ã —Å–ª–∞–≤–∏–ª–∏—Å—å —Å–≤–æ–µ–π –¥–∏–ø–ª–æ–º–∞—Ç–∏–µ–π. –ò–∑ —ç—Ç–æ–≥–æ —Ä–æ–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∏ –∂–µ–Ω—ã –º–Ω–æ–≥–∏—Ö —Ö–∞–Ω–æ–≤, –≤–∫–ª—é—á–∞—è –ë–æ—Ä—Ç–µ, —Å—É–ø—Ä—É–≥—É –ß–∏–Ω–≥–∏—Å—Ö–∞–Ω–∞." },
            qypshaq: { name: "“ö–´–ü–®–ê“ö", juz: ZHUZES.ORTA, tamga: "‚ä•", tamgaName: "“ö–æ—Å –∞–ª—ã–ø", color: "#C5A55A", story: "–ö—ã–ø—á–∞–∫–∏ ‚Äî —Ö–æ–∑—è–µ–≤–∞ –í–µ–ª–∏–∫–æ–π –°—Ç–µ–ø–∏ (–î–µ—à—Ç-–∏-–ö—ã–ø—á–∞–∫). –ò—Ö –∏–º—è –Ω–∞–≤–æ–¥–∏–ª–æ —Ç—Ä–µ–ø–µ—Ç –æ—Ç –ö–∏—Ç–∞—è –¥–æ –í–∏–∑–∞–Ω—Ç–∏–∏. –ï–≥–∏–ø–µ—Ç—Å–∫–∏–µ –º–∞–º–ª—é–∫–∏ –∏–º–µ–ª–∏ –∫—ã–ø—á–∞–∫—Å–∫–æ–µ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ." },
            kerey: { name: "–ö–ï–†–ï–ô", juz: ZHUZES.ORTA, tamga: "üïÄ", tamgaName: "–ê–±–∞“õ", color: "#C5A55A", story: "–ö–µ—Ä–µ–∏ ‚Äî –æ–¥–Ω–æ –∏–∑ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª–µ–π –ö–∞–∑–∞—Ö—Å–∫–æ–≥–æ —Ö–∞–Ω—Å—Ç–≤–∞. –í–º–µ—Å—Ç–µ —Å –ñ–∞–Ω–∏–±–µ–∫–æ–º –∏ –ö–µ—Ä–µ–π-—Ö–∞–Ω–∞–º–∏ –æ–Ω–∏ —Å–æ—Å—Ç–∞–≤–∏–ª–∏ —è–¥—Ä–æ –Ω–æ–≤–æ–π –Ω–∞—Ü–∏–∏." },
            uaq: { name: "–£–ê“ö", juz: ZHUZES.ORTA, tamga: "‚®º", tamgaName: "–£–∞“õ", color: "#C5A55A", story: "–í–æ–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–ª–µ–º—è, –≤—Å–µ–≥–¥–∞ —Å—Ç–∞–≤–∏–≤—à–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å—ã —Å—Ç–µ–ø–∏ –ø—Ä–µ–≤—ã—à–µ –≤—Å–µ–≥–æ. –ò–∑–≤–µ—Å—Ç–Ω—ã —Å–≤–æ–∏–º–∏ –±–∞—Ç—ã—Ä–∞–º–∏ –≤ –≤–æ–π–Ω–µ —Å –¥–∂—É–Ω–≥–∞—Ä–∞–º–∏." },

            // –ö—ñ—à—ñ –∂“Ø–∑
            alimuly: { name: "”ò–õ–Ü–ú“∞–õ–´", juz: ZHUZES.KISHI, tamga: "‚´ù", tamgaName: "–®–µ–≥–µ", color: "#C5A55A", story: "–ê–ª–∏–º—É–ª—ã ‚Äî –º–æ—â–Ω–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ú–ª–∞–¥—à–µ–≥–æ –∂—É–∑–∞. –ò–∑ —ç—Ç–æ–≥–æ —Ä–æ–¥–∞ –≤—ã—à–µ–ª –∑–Ω–∞–º–µ–Ω–∏—Ç—ã–π –±–∞—Ç—ã—Ä –ñ–∞–ª–∞–Ω—Ç–æ—Å –ë–∞—Ö–∞–¥—É—Ä, –ø–æ—Å—Ç—Ä–æ–∏–≤—à–∏–π –º–µ–¥—Ä–µ—Å–µ –®–µ—Ä-–î–æ—Ä –≤ –°–∞–º–∞—Ä–∫–∞–Ω–¥–µ." },
            baiuly: { name: "–ë–ê–ô“∞–õ–´", juz: ZHUZES.KISHI, tamga: "‚©ì", tamgaName: "–¢–∞—è“õ", color: "#C5A55A", story: "–ë–∞–π—É–ª—ã ‚Äî –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–∑ 12 —Ä–æ–¥–æ–≤ (–ê–¥–∞–π, –ë–µ—Ä—à, –®–µ—Ä–∫–µ—à –∏ –¥—Ä.). –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏–ª–∞ –ó–∞–ø–∞–¥–Ω–æ–≥–æ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞." },
            jetyru: { name: "–ñ–ï–¢–Ü–†–£", juz: ZHUZES.KISHI, tamga: "‚ßó", tamgaName: "–ñ–µ—Ç—ñ", color: "#C5A55A", story: "–ñ–µ—Ç—ã—Ä—É ‚Äî —Å–æ—é–∑ —Å–µ–º–∏ —Ä–æ–¥–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø–æ –ø—Ä–µ–¥–∞–Ω–∏—è–º –¢–∞—É–∫–µ-—Ö–∞–Ω–æ–º –¥–ª—è —É–∫—Ä–µ–ø–ª–µ–Ω–∏—è –æ–±–æ—Ä–æ–Ω–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å—Ç–µ–ø–∏." },
        };

        const SCREENS = { HOME: 'home', FLOW: 'flow', TREE: 'tree' };

        // --- Shezhire Tree Data (Alash -> Damir: 21 Generations) ---
        const TREE_DATA = {
            id: "alash", name: "–ê–ª–∞—à", gen: 1,
            children: [
                {
                    id: "uly-zhuz", name: "“∞–ª—ã –∂“Ø–∑", gen: 2, siblings: ["–û—Ä—Ç–∞ –∂“Ø–∑"], isBranch: true,
                    children: [
                        { id: "dulat", name: "–î—É–ª–∞—Ç", gen: 3 },
                        { id: "alban", name: "–ê–ª–±–∞–Ω", gen: 3 },
                        { id: "suan", name: "–°—É–∞–Ω", gen: 3 }
                    ]
                },
                {
                    id: "orta-zhuz", name: "–û—Ä—Ç–∞ –∂“Ø–∑", gen: 2, isBranch: true,
                    children: [
                        { id: "argyn", name: "–ê—Ä“ì—ã–Ω", gen: 3 },
                        { id: "nayman", name: "–ù–∞–π–º–∞–Ω", gen: 3 },
                        { id: "kerey", name: "–ö–µ—Ä–µ–π", gen: 3 }
                    ]
                },
                {
                    id: "kishi-zhuz", name: "–ö—ñ—à—ñ –∂“Ø–∑", gen: 2,
                    children: [{
                        id: "qayyrbay", name: "“ö–∞–π—ã—Ä–±–∞–π-“ö–∞—Ä–∞–∫–µ—Å–µ–∫", gen: 3,
                        children: [{
                            id: "alim", name: "”ò–ª—ñ–º", gen: 4,
                            children: [{
                                id: "tortqara", name: "“ö–∞—Ä–∞–º–∞—à–∞“õ-–¢”©—Ä—Ç“õ–∞—Ä–∞", gen: 5,
                                children: [{
                                    id: "qarash", name: "“ö–∞—Ä–∞—à", gen: 6,
                                    children: [{
                                        id: "aqpan", name: "–ê“õ–ø–∞–Ω-–ê–ø–ø–∞“õ", gen: 7,
                                        children: [{
                                            id: "qulaman", name: "“ö“±–ª–∞–º–∞–Ω", gen: 8,
                                            children: [{
                                                id: "amantay", name: "–ê–º–∞–Ω—Ç–∞–π", gen: 9,
                                                children: [{
                                                    id: "suyir", name: "–°“Ø–π—ñ—Ä", gen: 10,
                                                    children: [{
                                                        id: "agym", name: "–ê“ì—ã–º", gen: 11,
                                                        children: [{
                                                            id: "baitemir", name: "–ë–∞–π—Ç–µ–º—ñ—Ä", gen: 12,
                                                            siblings: ["“ö–æ—Å“õ“±–ª–∞“õ", "“ö–æ—Å–∞“õ", "–î–æ—Å–∞“õ", "–ñ–∞–Ω—Ç–µ–º—ñ—Ä", "–ë–∞–π—Ç–æ—Ä—ã"],
                                                            children: [{
                                                                id: "tanas", name: "–¢–∞–Ω–∞—Å", gen: 13,
                                                                siblings: ["–ú—ã—Ä–∑–∞–±–∞–π", "–ï—Ä—à–µ"],
                                                                children: [{
                                                                    id: "zhuas", name: "–ñ—É–∞—Å", gen: 14,
                                                                    siblings: ["“ö“±–¥–∞—Å", "–ú–∞–Ω–∞–±–∞–π", "–ñ–∞–Ω–∞–±–∞–π"],
                                                                    children: [{
                                                                        id: "kunash", name: "–ö“Ø–Ω”ô—à", gen: 15,
                                                                        siblings: ["–ë–µ–ª–µ—Å", "–ñ“±–ª–¥—ã–∑", "–®–µ–≥–µ–Ω", "–ë–∞–π—Å—ã–º–∞“õ"],
                                                                        children: [{
                                                                            id: "otar", name: "–û—Ç–∞—Ä", gen: 16,
                                                                            siblings: ["–¢–µ“£—ñ–∑–±–∞–π", "–ù–∏”ô–∑", "–´—Ä“ì—ã–∑–±–∞–π", "–û—Ç–∞—Ä–∞–ª—ã"],
                                                                            children: [{
                                                                                id: "qoilybai", name: "“ö–æ–π–ª—ã–±–∞–π", gen: 17,
                                                                                siblings: ["–¢”ô–∂—ñ", "–¢”ô–∫–µ—à"],
                                                                                children: [{
                                                                                    id: "alibi", name: "”ò–ª—ñ–±–∏", gen: 18,
                                                                                    siblings: ["“ö–∞–ª–∏", "–ê“ì—ã—Ç–∞–π", "–¢”ô–±—ñ–ª–±–∞–π", "–ë–∞–π–∂–∞–Ω", "–õ–∞–π—ã“õ"],
                                                                                    children: [
                                                                                        {
                                                                                            id: "qairat", name: "“ö–∞–π—Ä–∞—Ç", gen: 19,
                                                                                            children: [
                                                                                                {
                                                                                                    id: "aset", name: "”ò—Å–µ—Ç", gen: 20, highlight: true, label: "–ú–µ–Ω",
                                                                                                    children: [
                                                                                                        { id: "damir", name: "–î–∞–º–∏—Ä", gen: 21, highlight: true, label: "–¢“±“£“ì—ã—à “±–ª—ã–º" },
                                                                                                        { id: "sultan", name: "–°—É–ª—Ç–∞–Ω", gen: 21, highlight: true, label: "–û—Ä—Ç–∞–Ω—à—ã “±–ª—ã–º" },
                                                                                                        { id: "batyr", name: "–ë–∞—Ç—ã—Ä", gen: 21, highlight: true, label: "–ö—ñ—à—ñ “±–ª—ã–º" }
                                                                                                    ]
                                                                                                },
                                                                                                {
                                                                                                    id: "arsen", name: "–ê—Ä—Å–µ–Ω", gen: 20, highlight: true, label: "–Ü–Ω—ñ–º",
                                                                                                    children: [
                                                                                                        { id: "dani", name: "–î–∞–Ω–∏", gen: 21, highlight: true, label: "–¢“±“£“ì—ã—à “±–ª—ã" },
                                                                                                        { id: "bari", name: "–ë–∞—Ä–∏", gen: 21, highlight: true, label: "–ö—ñ—à—ñ “±–ª—ã" }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        {
                                                                                            id: "askar", name: "–ê—Å“õ–∞—Ä", gen: 19, highlight: true, label: "–ë—Ä–∞—Ç –ö–∞–π—Ä–∞—Ç–∞",
                                                                                            children: [
                                                                                                {
                                                                                                    id: "timur", name: "–¢–∏–º—É—Ä", gen: 20, highlight: true, label: "–°—ã–Ω –ê—Å–∫–∞—Ä–∞",
                                                                                                    children: [
                                                                                                        { id: "sanzhar", name: "–°–∞–Ω–∂–∞—Ä", gen: 21, highlight: true, label: "“∞–ª—ã" },
                                                                                                        { id: "arystan", name: "–ê—Ä—ã—Å—Ç–∞–Ω", gen: 21, highlight: true, label: "“∞–ª—ã" }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    ]
                                                                                }]
                                                                            }]
                                                                        }]
                                                                    }]
                                                                }]
                                                            }]
                                                        }]
                                                    }]
                                                }]
                                            }]
                                        }]
                                    }]
                                }]
                            }]
                        }]
                    }]
                }
            ]
        };

        // --- Layout Components ---

        function Background() {
            return (
                <div className="fixed inset-0 pointer-events-none z-0 overflow-hidden">
                    {Array.from({ length: 30 }).map((_, i) => (
                        <div key={i} className="absolute w-1 h-3 bg-gold-primary opacity-20 rounded-full animate-float"
                            style={{ left: `${Math.random() * 100}%`, top: `${Math.random() * 100}%`, animationDelay: `${Math.random() * 10}s` }} />
                    ))}
                    <div className="absolute inset-0 opacity-20"
                        style={{ backgroundImage: 'radial-gradient(circle at 50% 50%, #1a1a1a 0%, transparent 70%)' }}></div>
                </div>
            );
        }

        function OrnamentLine() {
            return (
                <div className="flex items-center justify-center gap-4 my-8">
                    <div className="w-16 h-[1px] bg-gradient-to-r from-transparent to-[#C5A55A]" />
                    <div className="w-2 h-2 border border-[#C5A55A] rotate-45" />
                    <div className="w-16 h-[1px] bg-gradient-to-l from-transparent to-[#C5A55A]" />
                </div>
            );
        }

        // --- Tree Components ---

        function Node({ node, expanded, onToggle, delay = 0 }) {
            const [vis, setVis] = useState(false);
            const [hov, setHov] = useState(false);
            useEffect(() => { const t = setTimeout(() => setVis(true), delay); return () => clearTimeout(t); }, [delay]);

            const hasKids = node.children && node.children.length > 0;
            const hasSibs = node.siblings && node.siblings.length > 0;
            const isOpen = expanded.has(node.id);
            const isHL = node.highlight;
            const isMain = node.isMainLine;

            return (
                <div style={{
                    opacity: vis ? 1 : 0,
                    transform: vis ? "translateY(0)" : "translateY(16px)",
                    transition: "all 0.5s cubic-bezier(0.16,1,0.3,1)",
                }}>
                    <div
                        onClick={() => hasKids && onToggle(node.id)}
                        onMouseEnter={() => setHov(true)}
                        onMouseLeave={() => setHov(false)}
                        className={`glass-card p-4 md:p-6 flex flex-col items-center group relative overflow-hidden transition-all duration-300 ${isHL ? 'border-[#C5A55A] shadow-[0_0_30px_rgba(197,165,90,0.15)] scale-105' : 'border-[#1a1a1a]'}`}
                        style={{
                            minWidth: node.gen >= 9 ? 'var(--node-w-deep)' : 'var(--node-w)',
                            borderRadius: 14,
                            cursor: hasKids ? "pointer" : "default",
                        }}
                    >
                        {isHL && <div className="absolute inset-0 bg-gradient-to-br from-[#C5A55A0A] to-transparent pointer-events-none" />}

                        {node.order && (
                            <div className="text-[9px] text-[#C5A55A] tracking-[0.2em] mb-1 uppercase font-serif">
                                {node.order}
                            </div>
                        )}

                        <div className={`font-serif leading-tight ${node.gen <= 3 ? 'text-lg' : 'text-base'} ${isHL ? 'text-[#C5A55A]' : 'text-white'}`}>
                            {node.name}
                        </div>

                        {node.label && (
                            <div className="text-[9px] text-[#C5A55A] mt-1 tracking-[0.2em] uppercase font-serif">
                                {node.label}
                            </div>
                        )}

                        <div className="text-[8px] text-[#555] mt-1 tracking-widest">
                            {node.gen}-“±—Ä–ø–∞“õ
                        </div>

                        {hasKids && (
                            <div className={`mt-2 flex flex-col items-center gap-1 transition-all duration-500 ${isOpen ? 'opacity-40' : 'opacity-100'}`}>
                                <div className="text-[8px] text-[#C5A55A] tracking-widest uppercase mb-1">
                                    {isOpen ? '–ñ–∞–±—É' : '–ñ–∞—é'}
                                </div>
                                <div className={`text-[10px] text-[#C5A55A] transition-transform duration-500 ${isOpen ? 'rotate-180' : ''}`}>
                                    ‚ñº
                                </div>
                            </div>
                        )}
                    </div>

                    {hasSibs && isOpen && (
                        <div className="flex flex-wrap gap-2 mt-4 justify-center animate-in fade-in slide-in-from-top-2">
                            {node.siblings.map((s, i) => (
                                <div key={s} className="px-3 py-1 rounded-lg border border-[#C5A55A1A] bg-[#C5A55A05] text-[10px] text-[#666] font-serif italic">
                                    {s}
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        }

        function TreeBranch({ node, expanded, onToggle, delay = 0 }) {
            const isOpen = expanded.has(node.id);
            const hasKids = node.children && node.children.length > 0;
            const isSplit = hasKids && node.children.length > 1;

            return (
                <div className="flex flex-col items-center">
                    <Node node={node} expanded={expanded} onToggle={onToggle} delay={delay} />

                    {hasKids && isOpen && !isSplit && (
                        <>
                            <div className="flex flex-col items-center h-8">
                                <div className="w-[1px] flex-1 bg-gradient-to-b from-[#C5A55A40] to-transparent relative">
                                    <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1 h-1 rounded-full bg-[#C5A55A] opacity-40" />
                                </div>
                            </div>
                            <TreeBranch node={node.children[0]} expanded={expanded} onToggle={onToggle} delay={delay + 60} />
                        </>
                    )}

                    {hasKids && isOpen && isSplit && (
                        <>
                            <div className="h-8 w-[1px] bg-gradient-to-b from-[#C5A55A40] to-[#C5A55A20]" />
                            <div className="flex gap-4 md:gap-12 justify-center items-start relative px-4">
                                {/* Horizontal Connection Line */}
                                <div className="absolute top-0 left-[15%] right-[15%] h-[1px] bg-gradient-to-r from-transparent via-[#C5A55A40] to-transparent" />
                                
                                {node.children.map((ch, i) => (
                                    <div key={ch.id} className="flex flex-col items-center relative animate-in fade-in slide-in-from-top-4 duration-700" style={{ animationDelay: `${i * 150}ms` }}>
                                        {/* Vertical connector to horizontal line */}
                                        <div className={`w-[1px] h-6 ${ch.highlight || ch.isMainLine ? 'bg-[#C5A55A40]' : 'bg-[#1a1a1a]'}`} />
                                        <TreeBranch node={ch} expanded={expanded} onToggle={onToggle} delay={delay + 100 + i * 100} />
                                    </div>
                                ))}
                            </div>
                        </>
                    )}
                </div>
            );
        }

        function ShezhireTreeSection({ onBack }) {
            const [expanded, setExpanded] = useState(new Set(["alash", "kishi-zhuz", "qayyrbay"]));

            const toggle = (id) => {
                setExpanded(prev => {
                    const next = new Set(prev);
                    next.has(id) ? next.delete(id) : next.add(id);
                    return next;
                });
            };

            const getAllIds = (node) => {
                let ids = [node.id];
                (node.children || []).forEach(ch => { ids = ids.concat(getAllIds(ch)); });
                return ids;
            };

            const expandAll = () => setExpanded(new Set(getAllIds(TREE_DATA)));
            const collapseAll = () => setExpanded(new Set(["baitemir"]));

            return (
                <div className="max-w-7xl mx-auto px-4 md:px-6 py-12 md:py-24 min-h-screen">
                    <div className="flex justify-between items-center mb-10 md:mb-16">
                        <button onClick={onBack} className="text-[#666] hover:text-[#C5A55A] transition-colors flex items-center gap-2 text-[10px] md:text-xs tracking-widest leading-none">
                            ‚Üê <span className="hidden md:inline">–ù–ê–ó–ê–î –ö –°–ï–¢–ö–ï</span><span className="md:hidden">–ù–ê–ó–ê–î</span>
                        </button>
                        <div className="flex gap-4">
                            <button onClick={expandAll} className="px-4 py-1.5 border border-[#C5A55A40] text-[#C5A55A] rounded-full text-[10px] tracking-widest uppercase hover:bg-[#C5A55A0A] transition-colors">–ê—à—É</button>
                            <button onClick={collapseAll} className="px-4 py-1.5 border border-[#1a1a1a] text-[#444] rounded-full text-[10px] tracking-widest uppercase hover:text-[#666] transition-colors">–ñ–∞–±—É</button>
                        </div>
                    </div>

                    <header className="text-center mb-16 md:mb-24 px-4">
                        <h2 className="text-3xl md:text-6xl font-serif mb-3 md:mb-4 tracking-widest text-[#C5A55A] leading-tight">–®–ï–ñ–Ü–†–ï –î–†–ï–í–û</h2>
                        <p className="text-[#666] tracking-[0.3em] md:tracking-[0.4em] uppercase text-[8px] md:text-[10px] mb-6 md:mb-8">”ò–õ–Ü–ú“∞–õ–´ ¬∑ –ö–Ü–®–Ü –ñ“Æ–ó ¬∑ “ö–ê–†–ê–ú–ê–®–ê“ö-–¢”®–†–¢“ö–ê–†–ê</p>
                        <div className="flex flex-col items-center gap-2">
                            <div className="w-10 md:w-12 h-[1px] bg-[#C5A55A40]" />
                            <div className="text-[20px] md:text-[24px] text-[#C5A55A] tamga-glow font-serif">‚©î</div>
                        </div>
                    </header>

                    <div className="relative z-10 overflow-x-auto pb-24">
                        <TreeBranch node={TREE_DATA} expanded={expanded} onToggle={toggle} />
                    </div>

                    <div className="fixed bottom-6 right-6 md:bottom-12 md:right-12 z-50 flex gap-2 md:gap-4">
                        <div className="glass-card px-3 py-2 md:px-4 md:py-3 rounded-xl md:rounded-2xl flex flex-col items-center text-center">
                            <span className="text-[8px] md:text-[10px] text-[#555] tracking-widest uppercase mb-1">“∞—Ä–ø–∞“õ</span>
                            <span className="text-xl md:text-2xl font-serif text-[#C5A55A]">21</span>
                        </div>
                        <div className="glass-card px-3 py-2 md:px-4 md:py-3 rounded-xl md:rounded-2xl flex flex-col items-center text-center border-[#C5A55A40] animate-pulse">
                            <span className="text-[8px] md:text-[10px] text-[#555] tracking-widest uppercase mb-1">–ñ–µ—Ç—ñ –∞—Ç–∞</span>
                            <span className="text-xl md:text-2xl font-serif text-[#C5A55A]">‚úì</span>
                        </div>
                    </div>
                </div>
            );
        }

        // --- Main App ---

        function App() {
            const [currentScreen, setCurrentScreen] = useState(SCREENS.HOME);
            const [selectedTribe, setSelectedTribe] = useState(null);

            const handleTribeClick = (key) => {
                setSelectedTribe(key);
                setCurrentScreen(SCREENS.FLOW);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };

            const goToTree = () => {
                setCurrentScreen(SCREENS.TREE);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };

            return (
                <div className="relative z-10 min-h-screen">
                    <Background />

                    {currentScreen === SCREENS.HOME ? (
                        <HomeScreen onTribeSelect={handleTribeClick} onTreeClick={goToTree} />
                    ) : currentScreen === SCREENS.FLOW ? (
                        <InteractiveFlow tribeKey={selectedTribe} onBack={() => setCurrentScreen(SCREENS.HOME)} onTreeFinish={goToTree} />
                    ) : (
                        <ShezhireTreeSection onBack={() => setCurrentScreen(SCREENS.HOME)} />
                    )}

                    <footer className="py-12 border-t border-[#1a1a1a] text-center text-[#444] text-xs uppercase tracking-widest">
                        <p>¬© 2026 SHEJIRE AI ¬∑ –¶–∏—Ñ—Ä–æ–≤–æ–π –ö—É—Ä—É–ª—Ç–∞–π</p>
                    </footer>
                </div>
            );
        }

        // --- Home Page ---

        function HomeScreen({ onTribeSelect, onTreeClick }) {
            return (
                <div className="max-w-7xl mx-auto px-6 pt-24">
                    <header className="text-center mb-24">
                        <div className="inline-block px-4 py-1 border border-[#C5A55A40] rounded-full text-[10px] tracking-[0.3em] text-[#C5A55A] uppercase mb-6">
                            Smart Shejire Protocol v2.0
                        </div>
                        <h1 className="text-5xl md:text-8xl font-serif mb-6 tracking-tight">–®–µ–∂—ñ—Ä–µ</h1>
                        <p className="text-[#999] max-w-2xl mx-auto text-base md:text-lg leading-relaxed font-light italic px-4">
                            ¬´–ü–ª–µ–º—è ‚Äî —ç—Ç–æ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ. –¢–∞–º–≥–∞ ‚Äî —ç—Ç–æ –≤–ª–∞—Å—Ç—å. –®–µ–∂—ñ—Ä–µ ‚Äî —ç—Ç–æ –≤–µ—á–Ω–æ—Å—Ç—å.¬ª
                        </p>
                        <OrnamentLine />
                        <button onClick={onTreeClick} className="mt-8 px-8 py-3 border border-[#C5A55A] text-[#C5A55A] rounded-full text-xs tracking-widest uppercase hover:bg-[#C5A55A1A] transition-all duration-500 gold-pill-hover">
                            –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–æ–¥–æ–≤–æ–≥–æ –¥—Ä–µ–≤–∞ ‚Üí
                        </button>
                    </header>

                    <section className="mb-24 md:mb-32 grid md:grid-cols-2 gap-12 md:gap-16 items-center px-4">
                        <div className="order-2 md:order-1">
                            <h2 className="text-2xl md:text-3xl font-serif mb-4 md:mb-6">–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?</h2>
                            <div className="space-y-4 md:space-y-6 text-[#ccc] leading-relaxed text-sm md:text-base">
                                <p>
                                    –®–µ–∂—ñ—Ä–µ ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –≥–µ–Ω–µ–∞–ª–æ–≥–∏—è, —ç—Ç–æ –≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Å–ø–æ—Ä—Ç –≤–µ–ª–∏–∫–æ–π —Å—Ç–µ–ø–∏. –ù–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –≤–µ–∫–æ–≤ –∑–Ω–∞–Ω–∏–µ —Å–≤–æ–∏—Ö —Å–µ–º–∏ –ø—Ä–µ–¥–∫–æ–≤ (–ñ–µ—Ç—ñ –ê—Ç–∞) —Å–ø–∞—Å–∞–ª–æ –Ω–∞—à—É –Ω–∞—Ü–∏—é –æ—Ç –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —É–≤—è–¥–∞–Ω–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–ª–æ –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ –µ–¥–∏–Ω—Å—Ç–≤–æ.
                                </p>
                                <p>
                                    –í —ç–ø–æ—Ö—É –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ –º—ã –ø–µ—Ä–µ–Ω–æ—Å–∏–º —ç—Ç–æ –Ω–∞—Å–ª–µ–¥–∏–µ –≤ –±–ª–æ–∫—á–µ–π–Ω. –ö–∞–∂–¥–∞—è —Ç–∞–º–≥–∞ –∑–¥–µ—Å—å ‚Äî —ç—Ç–æ —Å–∏–º–≤–æ–ª —Ü–∏—Ñ—Ä–æ–≤–æ–π —Å—É–±—ä–µ–∫—Ç–Ω–æ—Å—Ç–∏, –∫–ª—é—á –∫ –≥–æ–ª–æ—Å—É –≤ —Ä–æ–¥–æ–≤–æ–º DAO.
                                </p>
                            </div>
                        </div>
                        <div className="relative order-1 md:order-2">
                            <div className="aspect-square glass-card rounded-full p-8 md:p-12 flex flex-col items-center justify-center text-center max-w-[300px] md:max-w-none mx-auto">
                                <span className="text-6xl md:text-8xl text-[#C5A55A] tamga-glow font-serif mb-4">‚©î</span>
                                <h3 className="text-xl tracking-widest text-[#C5A55A] font-semibold mb-2">–ë–ê“ö–ê–ù ¬∑ –¢–ê–ú“í–ê</h3>
                                <p className="text-xs text-[#666] uppercase">–°–∏–º–≤–æ–ª –≤–ª–∞—Å—Ç–∏ –∏ –ø—Ä–µ–µ–º—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏</p>
                            </div>
                            <div className="absolute -top-4 -right-4 w-24 h-24 bg-[#C5A55A1A] rounded-full blur-2xl"></div>
                            <div className="absolute -bottom-8 -left-8 w-32 h-32 bg-[#C5A55A1A] rounded-full blur-3xl"></div>
                        </div>
                    </section>

                    <section className="mb-24 px-4">
                        <div className="flex flex-col md:flex-row md:items-end justify-between mb-8 md:mb-12 border-b border-[#1a1a1a] pb-6">
                            <div>
                                <h2 className="text-3xl md:text-4xl font-serif mb-2">–¢–∞“£–¥–∞—É —Å–µ—Ç–∫–∞—Å—ã</h2>
                                <p className="text-[#666] tracking-widest uppercase text-[10px] md:text-xs">–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–π —Ä–æ–¥ –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø—É—Ç–∏</p>
                            </div>
                            <div className="flex flex-wrap gap-2 md:gap-4 mt-6 md:mt-0">
                                {Object.values(ZHUZES).map(z => (
                                    <span key={z} className="text-[10px] text-[#444] border border-[#222] px-3 py-1 rounded-full">{z}</span>
                                ))}
                            </div>
                        </div>

                        {/* Tumalas Grid style */}
                        <div className="space-y-16">
                            <ZhuzSection title={ZHUZES.ULY} list={Object.entries(TRIBES_DB).filter(([_, t]) => t.juz === ZHUZES.ULY)} onSelect={onTribeSelect} />
                            <ZhuzSection title={ZHUZES.ORTA} list={Object.entries(TRIBES_DB).filter(([_, t]) => t.juz === ZHUZES.ORTA)} onSelect={onTribeSelect} />
                            <ZhuzSection title={ZHUZES.KISHI} list={Object.entries(TRIBES_DB).filter(([_, t]) => t.juz === ZHUZES.KISHI)} onSelect={onTribeSelect} />
                        </div>
                    </section>
                </div>
            );
        }

        function ZhuzSection({ title, list, onSelect }) {
            return (
                <div className="group">
                    <h3 className="text-[#C5A55A] text-[10px] md:text-xs font-semibold tracking-[0.3em] md:tracking-[0.5em] uppercase mb-6 md:mb-8 flex items-center gap-4">
                        {title}
                        <div className="h-[1px] flex-1 bg-gradient-to-r from-[#C5A55A40] to-transparent" />
                    </h3>
                    <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 md:gap-4">
                        {list.map(([key, t]) => (
                            <button
                                key={key}
                                onClick={() => onSelect(key)}
                                className="glass-card rounded-2xl p-6 flex flex-col items-center group/card relative overflow-hidden"
                            >
                                <div className="text-3xl text-[#C5A55A] mb-4 tamga-glow group-hover/card:scale-125 transition-transform duration-500">
                                    {t.tamga}
                                </div>
                                <span className="text-xs font-bold tracking-[0.2em] text-white">
                                    {t.name}
                                </span>
                                <div className="absolute inset-0 bg-gradient-to-b from-transparent to-[#C5A55A0A] opacity-0 group-hover/card:opacity-100 transition-opacity"></div>
                            </button>
                        ))}
                    </div>
                </div>
            );
        }

        // --- Interactive Flow Screens ---

        function InteractiveFlow({ tribeKey, onBack, onTreeFinish }) {
            const [step, setStep] = useState(0); // 0:Story, 1:JetiAta, 2:Mint, 3:Result
            const [userData, setUserData] = useState({ name: "", ancestors: Array(7).fill("") });

            const tribe = TRIBES_DB[tribeKey];

            return (
                <div className="max-w-4xl mx-auto px-6 py-24 min-h-screen content-center">
                    <button onClick={onBack} className="text-[#666] hover:text-[#C5A55A] transition-colors mb-12 flex items-center gap-2 text-xs tracking-widest">
                        ‚Üê –ù–ê–ó–ê–î –ö –°–ï–¢–ö–ï
                    </button>

                    {step === 0 && <StoryScreen tribe={tribe} onNext={() => setStep(1)} />}
                    {step === 1 && <JetiAtaScreen tribe={tribe} data={userData} onChange={setUserData} onNext={() => setStep(2)} />}
                    {step === 2 && <MintScreen tribe={tribe} data={userData} onNext={() => setStep(3)} />}
                    {step === 3 && <ResultScreen tribe={tribe} data={userData} onRestart={onBack} onShowTree={onTreeFinish} />}
                </div>
            );
        }

        function StoryScreen({ tribe, onNext }) {
            const [tab, setTab] = useState('history');

            return (
                <div className="animate-in fade-in slide-in-from-bottom-8 duration-700">
                    <div className="flex flex-col items-center text-center mb-12">
                        <div className="w-24 h-24 rounded-full border border-[#C5A55A40] flex items-center justify-center text-5xl text-[#C5A55A] tamga-glow mb-6">
                            {tribe.tamga}
                        </div>
                        <h1 className="text-5xl font-serif tracking-widest mb-2">{tribe.name}</h1>
                        <p className="text-[#C5A55A] text-[10px] tracking-[0.5em] uppercase font-bold">{tribe.juz}</p>
                    </div>

                    <div className="glass-card rounded-3xl p-8 mb-12">
                        <p className="text-[#999] text-[10px] tracking-widest uppercase mb-4">–•—Ä–æ–Ω–∏–∫–∏ –ø–ª–µ–º–µ–Ω–∏</p>
                        <p className="text-xl md:text-2xl font-serif leading-relaxed text-[#eee]">
                            {tribe.story}
                        </p>
                    </div>

                    <button onClick={onNext} className="w-full gold-pill py-5 rounded-2xl font-bold tracking-[0.3em] uppercase transition hover:scale-[1.02] shadow-xl">
                        –ö –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ñ–µ—Ç—ñ –ê—Ç–∞ ‚Üí
                    </button>
                </div>
            );
        }

        function JetiAtaScreen({ tribe, data, onChange, onNext }) {
            const labels = ["”®–∑—ñ“£ (–¢—ã)", "”ò–∫–µ (–û—Ç–µ—Ü)", "–ê—Ç–∞ (–î–µ–¥)", "–ê—Ä“ì—ã –∞—Ç–∞ (–ü—Ä–∞–¥–µ–¥)", "–ë–∞–±–∞ (4-–µ –∫–æ–ª–µ–Ω–æ)", "–¢“Ø–ø –∞—Ç–∞ (5-–µ –∫–æ–ª–µ–Ω–æ)", "–¢–µ–∫ –∞—Ç–∞ (6-–µ –∫–æ–ª–µ–Ω–æ)"];
            const [error, setError] = useState("");

            const validate = () => {
                if (!data.name.trim()) { setError("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ–µ –∏–º—è"); return; }
                const filled = data.ancestors.filter(a => a.trim()).length;
                if (filled < 3) { setError("–ù–∞–∑–æ–≤–∏—Ç–µ —Ö–æ—Ç—è –±—ã 3 –ø—Ä–µ–¥–∫–æ–≤ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è"); return; }
                onNext();
            };

            return (
                <div className="animate-in fade-in slide-in-from-right-8 duration-500">
                    <h2 className="text-3xl font-serif text-center mb-12">–ü—Ä–æ—Ç–æ–∫–æ–ª –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ù–∞—Å–ª–µ–¥–∏—è</h2>

                    <div className="max-w-md mx-auto space-y-8">
                        <div>
                            <label className="text-[10px] tracking-[0.2em] text-[#C5A55A] block mb-2">–í–ê–®–ï –ò–ú–Ø</label>
                            <input
                                value={data.name}
                                onChange={e => onChange({ ...data, name: e.target.value })}
                                className="w-full bg-[#0d0d0d] border border-[#222] rounded-xl px-4 py-3 outline-none focus:border-[#C5A55A80] transition"
                                placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è..."
                            />
                        </div>

                        <div className="space-y-4 relative">
                            <div className="absolute left-4 top-4 bottom-4 w-[1px] bg-[#222]" />
                            {labels.map((l, i) => (
                                <div key={i} className="flex gap-4 items-center">
                                    <div className={`w-8 h-8 rounded-full flex-shrink-0 z-10 text-[10px] font-bold flex items-center justify-center border transition-colors ${data.ancestors[i] ? 'gold-pill border-[#C5A55A]' : 'bg-black border-[#222] text-[#444]'}`}>
                                        {i + 1}
                                    </div>
                                    <div className="flex-1">
                                        <label className="text-[9px] text-[#555] block uppercase mb-1">{l}</label>
                                        <input
                                            value={data.ancestors[i]}
                                            onChange={e => {
                                                const newA = [...data.ancestors]; newA[i] = e.target.value;
                                                onChange({ ...data, ancestors: newA });
                                            }}
                                            className="w-full bg-transparent border-b border-[#222] py-2 text-sm focus:border-[#C5A55A] outline-none transition"
                                            placeholder={`–ò–º—è ${i + 1}-–≥–æ –ø—Ä–µ–¥–∫–∞`}
                                        />
                                    </div>
                                </div>
                            ))}
                        </div>

                        {error && <p className="text-red-500 text-xs text-center">{error}</p>}

                        <button onClick={validate} className="w-full gold-pill py-5 rounded-2xl font-bold tracking-[0.3em] uppercase transition hover:scale-[1.02]">
                            –ü–†–û–í–ï–†–ò–¢–¨ –ö–û–î –†–û–î–ê
                        </button>
                    </div>
                </div>
            );
        }

        function MintScreen({ tribe, data, onNext }) {
            const [progress, setProgress] = useState(0);
            const [status, setStatus] = useState("–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...");

            useEffect(() => {
                const interval = setInterval(() => {
                    setProgress(p => {
                        if (p >= 100) { clearInterval(interval); setTimeout(onNext, 1000); return 100; }
                        if (p < 30) setStatus("–ó–∞–ø–∏—Å—å –≤ IPFS...");
                        else if (p < 60) setStatus("–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞...");
                        else if (p < 90) setStatus("–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ Polygon...");
                        else setStatus("–ú–∏–Ω—Ç–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω!");
                        return p + Math.random() * 10;
                    });
                }, 400);
                return () => clearInterval(interval);
            }, []);

            return (
                <div className="text-center py-24">
                    <div className="w-48 h-48 mx-auto mb-12 relative">
                        <div className="absolute inset-0 border-4 border-[#C5A55A20] rounded-full"></div>
                        <div className="absolute inset-0 border-t-4 border-[#C5A55A] rounded-full animate-spin"></div>
                        <div className="absolute inset-0 flex items-center justify-center text-4xl text-[#C5A55A] tamga-glow">
                            {tribe.tamga}
                        </div>
                    </div>
                    <h2 className="text-3xl font-serif mb-4">–ß–µ–∫–∞–Ω–∫–∞ SBT –¢–æ–∫–µ–Ω–∞</h2>
                    <p className="text-[#666] mb-12 tracking-widest uppercase text-xs">{status}</p>

                    <div className="max-w-xs mx-auto h-1 bg-[#1a1a1a] rounded-full overflow-hidden">
                        <div className="h-full bg-[#C5A55A] shadow-[0_0_10px_rgba(197,165,90,0.8)] transition-all" style={{ width: `${progress}%` }}></div>
                    </div>
                </div>
            );
        }

        function ResultScreen({ tribe, data, onRestart, onShowTree }) {
            const txHash = `0x${Array.from({ length: 32 }, () => Math.floor(Math.random() * 16).toString(16)).join('')}`;

            return (
                <div className="animate-in zoom-in-95 duration-700">
                    <div className="glass-card rounded-[2.5rem] p-1 scale-105 rotate-1 mb-16 relative">
                        <div className="bg-[#000] rounded-[2.4rem] p-8 text-center overflow-hidden">
                            {/* Decorative Gold Header */}
                            <div className="absolute top-0 inset-x-0 h-32 bg-gradient-to-b from-[#C5A55A1A] to-transparent"></div>

                            <div className="relative z-10 pt-8">
                                <div className="text-7xl text-[#C5A55A] tamga-glow font-serif mb-6">{tribe.tamga}</div>
                                <h1 className="text-4xl font-serif tracking-tight mb-2 uppercase">{tribe.name}</h1>
                                <p className="text-[#C5A55A] text-[10px] tracking-[0.5em] mb-8 uppercase font-bold">{tribe.juz}</p>

                                <div className="border-t border-b border-[#1a1a1a] py-6 mb-8 text-left space-y-3">
                                    <div className="flex justify-between">
                                        <span className="text-[10px] text-[#444] uppercase tracking-widest">–í–ª–∞–¥–µ–ª–µ—Ü</span>
                                        <span className="text-sm font-semibold">{data.name}</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-[10px] text-[#444] uppercase tracking-widest">–ì–ª—É–±–∏–Ω–∞</span>
                                        <span className="text-sm font-semibold">{data.ancestors.filter(a => a.trim()).length}/7 –ê—Ç–∞</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span className="text-[10px] text-[#444] uppercase tracking-widest">–¢–∏–ø —Ç–æ–∫–µ–Ω–∞</span>
                                        <span className="text-sm font-semibold text-[#4ade80]">Soulbound (SBT)</span>
                                    </div>
                                </div>

                                <div className="bg-[#0a0a0a] rounded-xl p-4 mb-4 text-left border border-[#1a1a1a]">
                                    <span className="text-[10px] text-[#444] uppercase block mb-1">Transaction Hash</span>
                                    <code className="text-[10px] text-[#555] break-all">{txHash}</code>
                                </div>
                                <p className="text-[10px] text-[#444] tracking-widest uppercase mb-6">Verified by Shejire AI Consensus v2.0</p>

                                <button onClick={onShowTree} className="w-full bg-[#4ade8020] border border-[#4ade8040] text-[#4ade80] py-4 rounded-xl font-bold tracking-[0.2em] uppercase transition hover:bg-[#4ade8030] mb-4">
                                    –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–æ–µ –¥—Ä–µ–≤–æ
                                </button>
                            </div>
                        </div>
                    </div>

                    <button onClick={onRestart} className="w-full border border-[#222] hover:border-[#C5A55A40] text-[#666] hover:text-[#C5A55A] py-5 rounded-2xl font-bold tracking-[0.3em] uppercase transition">
                        –í–ï–†–ù–£–¢–¨–°–Ø –í –°–¢–ï–ü–¨
                    </button>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>